{"version":3,"sources":["scripts/app-e01ce5021d.js"],"names":["angular","module","NewQuestionDialogController","$mdDialog","QuestionService","OptionService","NotificationService","activate","vm","options","push","Option","this","question","Question","hide","cancel","addNewOption","create","addQuestion","then","id","key","addOptionsToQuestion","showNotification","$inject","controller","questionListItem","QuestionListItemController","VoteService","getOptionsToQuestion","selected","vote","addVoteToQuestion","title","showConfirm","ev","confirm","textContent","targetEvent","ok","show","removeQuestion","directive","restrict","templateUrl","scope","controllerAs","bindToController","$firebaseArray","FirebaseDataService","init","votes","Vote","option","createdAt","Date","getTime","child","$id","getVotesToQuestion","getVotesToQuestionId","service","factory","StatisticsController","$stateParams","$rootScope","getQuestionById","$loaded","groupedVotes","_","groupBy","forEach","votesMap","label","merge","$watch","event","x","latestVote","length","optionVotes","answer","highchartsPie","HighchartsController","chartData","link","element","attrs","transformVotes","data","transformedData","value","highcharts","chart","type","options3d","enabled","alpha","beta","text","tooltip","pointFormat","plotOptions","pie","allowPointSelect","cursor","depth","dataLabels","format","series","name","newValue","oldValue","$","setData","highchartsColumn","HighchartsColumnController","viewDistance","xAxis","crosshair","yAxis","min","column","pointPadding","borderWidth","setCategories","keys","map","item","sideNavToggle","SideNavToggleController","$mdSidenav","buildToggler","navID","toggle","toggleRight","isOpenRight","isOpen","replace","sideNav","SideNavController","$log","close","openNewQuestionDialog","parent","document","body","clickOutsideToClose","reset","QuestionsController","questions","getQuestions","$firebaseObject","description","imageUrl","voter","$add","$remove","voteOption","isDefined","dateFilter","time","moment","fromNow","filter","questionId","$mdToast","message","simple","position","hideDelay","firebaseRef","root","remove","Firebase","runBlock","debug","run","routerConfig","$stateProvider","$urlRouterProvider","state","url","otherwise","config","constant","$logProvider","toastrConfig","debugEnabled","allowHtml","timeOut","positionClass","preventDuplicates","progressBar","$templateCache","put"],"mappings":"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","file":"scripts/app-e01ce5021d.js","sourcesContent":["(function () {\n  'use strict';\n\n  angular\n    .module('angularVoteApp', [\n      'ngAnimate',\n      'ngSanitize',\n      'ngMessages',\n      'ngAria',\n      'ui.router',\n      'ngMaterial',\n      'toastr',\n      'firebase',\n      'angular-loading-bar',\n      'nvd3']);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angularVoteApp')\n    .controller('NewQuestionDialogController', NewQuestionDialogController);\n\n  /** @ngInject */\n  function NewQuestionDialogController($mdDialog, QuestionService, OptionService, NotificationService) {\n    var vm = this;\n    vm.question = new QuestionService.Question();\n    vm.options = [];\n\n    activate();\n\n    vm.hide = function() {\n      $mdDialog.hide();\n    };\n    vm.cancel = function() {\n      $mdDialog.cancel();\n    };\n\n    vm.addNewOption = function () {\n      vm.options.push(new OptionService.Option());\n    };\n\n    vm.create = function (){\n      QuestionService.addQuestion(vm.question).then(function (question) {\n        var id = question.key();\n        OptionService.addOptionsToQuestion(id,vm.options);\n        NotificationService.showNotification(\"Question created successfully.\");\n        vm.hide();\n      });\n    };\n\n    function activate(){\n      vm.options.push(new OptionService.Option());\n      vm.options.push(new OptionService.Option());\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angularVoteApp')\n    .directive('questionListItem', questionListItem);\n\n  /** @ngInject */\n  function questionListItem() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/question/list/question.list.item.directive.html',\n      scope: {\n        question: '='\n      },\n      controller: QuestionListItemController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function QuestionListItemController($mdDialog, VoteService, OptionService, QuestionService, NotificationService) {\n      var vm = this;\n      vm.options = null;\n      vm.selected = null;\n\n      activate();\n\n      vm.vote = function () {\n        VoteService.addVoteToQuestion(vm.question,vm.selected).then(function () {\n\n          NotificationService.showNotification(\"Successfully voted on question \" + vm.question.title);\n          vm.selected = null;\n        });\n      };\n\n      vm.showConfirm = function(ev) {\n        var confirm = $mdDialog.confirm()\n          .title('Are you sure you want to delete this question?')\n          .textContent('It will be removed permanently.')\n          .targetEvent(ev)\n          .ok('Yes, delete it')\n          .cancel('Cancel');\n        $mdDialog.show(confirm).then(function() {\n          QuestionService.removeQuestion(vm.question);\n        });\n      };\n\n      function activate(){\n        vm.options = OptionService.getOptionsToQuestion(vm.question);\n      }\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angularVoteApp')\n    .factory('VoteService', VoteService);\n\n  /** @ngInject */\n  function VoteService($firebaseArray, FirebaseDataService) {\n    var votes = null;\n\n    var service = {\n      Vote: Vote,\n      addVoteToQuestion: addVoteToQuestion,\n      getVotesToQuestion: getVotesToQuestion,\n      getVotesToQuestionId: getVotesToQuestionId\n    };\n\n    init();\n\n    return service;\n\n    function init(){\n      votes = $firebaseArray(FirebaseDataService.votes);\n    }\n\n    function Vote(){\n      this.option = '';\n      this.createdAt = null;\n    }\n\n    function addVoteToQuestion(question, option){\n      var vote = new Vote();\n      vote.createdAt = (new Date()).getTime();\n      vote.option = option;\n\n      return FirebaseDataService.votes.child(question.$id).push(vote);\n    }\n\n    function getVotesToQuestion(question){\n      return $firebaseArray(FirebaseDataService.votes.child(question.$id));\n    }\n\n    function getVotesToQuestionId(id){\n      return $firebaseArray(FirebaseDataService.votes.child(id));\n    }\n\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('angularVoteApp')\n    .controller('StatisticsController', StatisticsController);\n\n  /** @ngInject */\n  function StatisticsController($mdDialog, VoteService, OptionService, $stateParams, QuestionService, $rootScope) {\n    var vm = this;\n\n    vm.question = null;\n\n    vm.votes = null;\n    vm.options = null;\n\n    vm.votesMap = {};\n\n    activate();\n\n    vm.hide = function () {\n      $mdDialog.hide();\n    };\n    vm.cancel = function () {\n      $mdDialog.cancel();\n    };\n    vm.answer = function (answer) {\n      $mdDialog.hide(answer);\n    };\n\n    function activate() {\n      QuestionService.getQuestionById($stateParams.id).$loaded().then(function (question) {\n        vm.question = question;\n\n        vm.votes = VoteService.getVotesToQuestion(vm.question);\n        vm.options = OptionService.getOptionsToQuestion(vm.question);\n\n        vm.votes.$loaded().then(function (votes) {\n          var groupedVotes = _.groupBy(vm.votes, \"option\");\n\n          _.forEach(vm.options, function (option) {\n            vm.votesMap[option.label] = [];\n          });\n\n          _.merge(vm.votesMap, groupedVotes);\n\n          vm.votes.$watch(function (event, x) {\n            var latestVote = vm.votes[vm.votes.length - 1];\n            var optionVotes = vm.votesMap[latestVote.option];\n            optionVotes.push(latestVote);\n          });\n        });\n      });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angularVoteApp')\n    .directive('highchartsPie', highchartsPie);\n\n  /** @ngInject */\n  function highchartsPie($rootScope) {\n    var directive = {\n      restrict: 'A',\n      scope: {\n        chartData: '='\n      },\n      controller: HighchartsController,\n      controllerAs: 'vm',\n      bindToController: true,\n      link: function (scope,element,attrs) {\n        element.highcharts({\n          chart: {\n            type: 'pie',\n            options3d: {\n              enabled: true,\n              alpha: 45,\n              beta: 0\n            }\n          },\n          title: {\n            text: 'Pie chart visualization of votes'\n          },\n          tooltip: {\n            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'\n          },\n          plotOptions: {\n            pie: {\n              allowPointSelect: true,\n              cursor: 'pointer',\n              depth: 35,\n              dataLabels: {\n                enabled: true,\n                format: '{point.name}'\n              }\n            }\n          },\n          series: [{\n            type: 'pie',\n            name: 'Votes on option',\n            data: []\n          }]\n        });\n\n        scope.$watch('vm.chartData', function (newValue,oldValue) {\n          var chart = $('#container').highcharts();\n          var data = transformVotes(newValue);\n          chart.series[0].setData(data);\n        },true);\n\n        function transformVotes(data){\n          var transformedData = [];\n\n          _.forEach(data, function(key,value){\n            transformedData.push([value, key.length]);\n          });\n          return transformedData;\n        }\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function HighchartsController($mdDialog, VoteService, OptionService) {\n      var vm = this;\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('angularVoteApp')\n    .directive('highchartsColumn', highchartsColumn);\n\n  /** @ngInject */\n  function highchartsColumn() {\n    var directive = {\n      restrict: 'A',\n      scope: {\n        chartData: '='\n      },\n      controller: HighchartsColumnController,\n      controllerAs: 'vm',\n      bindToController: true,\n      link: function (scope, element, attrs) {\n        element.highcharts({\n          chart: {\n            type: 'column',\n            options3d: {\n              enabled: true,\n              alpha: 15,\n              beta: 15,\n              depth: 50,\n              viewDistance: 25\n            }\n          },\n          title: {\n            text: 'Column chart visualization of votes'\n          },\n          xAxis: {\n            crosshair: true\n          },\n          yAxis: {\n            min: 0,\n            title: {\n              text: 'Vote number'\n            }\n          },\n          plotOptions: {\n            column: {\n              pointPadding: 0.2,\n              borderWidth: 0\n            }\n          },\n          series: [{}]\n        });\n\n        scope.$watch('vm.chartData', function (newValue, oldValue) {\n\n          var chart = $('#container-column').highcharts();\n\n          chart.xAxis[0].setCategories(_.keys(newValue), true, true);\n\n          chart.series[0].setData(_.map(newValue, function (item) {\n            return item.length;\n          }));\n        }, true);\n\n        function transformVotes(data) {\n          var transformedData = [];\n\n          _.forEach(data, function (key, value) {\n            transformedData.push([value, key.length]);\n          });\n          return transformedData;\n        }\n      }\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function HighchartsColumnController($mdDialog, VoteService, OptionService) {\n      var vm = this;\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angularVoteApp')\n    .directive('sideNavToggle', sideNavToggle);\n\n  /** @ngInject */\n  function sideNavToggle() {\n    var directive = {\n      restrict: 'E',\n      replace: true,\n      templateUrl: 'app/components/side-nav/sidenav.toggle.html',\n      scope: {\n\n      },\n      controller: SideNavToggleController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function SideNavToggleController($mdSidenav) {\n      var vm = this;\n\n      vm.toggleRight = buildToggler('right');\n      vm.isOpenRight = function(){\n        return $mdSidenav('right').isOpen();\n      };\n\n      function buildToggler(navID) {\n        return function() {\n          $mdSidenav(navID)\n            .toggle();\n        }\n      }\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angularVoteApp')\n    .directive('sideNav', sideNav);\n\n  /** @ngInject */\n  function sideNav() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'app/components/side-nav/sidenav.html',\n      scope: {\n\n      },\n      controller: SideNavController,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n\n    return directive;\n\n    /** @ngInject */\n    function SideNavController($mdSidenav, $log, $mdDialog, FirebaseDataService) {\n      var vm = this;\n\n      vm.close = function () {\n        $mdSidenav('right').close();\n      };\n\n      vm.openNewQuestionDialog = function (ev) {\n          $mdDialog.show({\n              controller: \"NewQuestionDialogController\",\n              controllerAs: \"vm\",\n              templateUrl: 'app/components/question/new/new.question.dialog.html',\n              parent: angular.element(document.body),\n              targetEvent: ev,\n              clickOutsideToClose:true\n            })\n            .finally(vm.close);\n      };\n\n      vm.showConfirm = function(ev) {\n        var confirm = $mdDialog.confirm()\n          .title('Are you sure you want to reset the database?')\n          .textContent('All data will be deleted permanently.')\n          .targetEvent(ev)\n          .ok('Yes, delete everything')\n          .cancel('Cancel');\n        $mdDialog.show(confirm).then(function () {\n          FirebaseDataService.reset();\n        }).finally(vm.close);\n      };\n    }\n  }\n\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('angularVoteApp')\n    .controller('QuestionsController', QuestionsController);\n\n  /** @ngInject */\n  function QuestionsController(QuestionService, VoteService, $mdDialog) {\n    var vm = this;\n\n    vm.questions = QuestionService.getQuestions();\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angularVoteApp')\n    .factory('QuestionService', QuestionService);\n\n  /** @ngInject */\n  function QuestionService($firebaseArray, FirebaseDataService, OptionService, $firebaseObject) {\n    var questions = null;\n\n    var service = {\n      Question: Question,\n      Vote: Vote,\n      getQuestions: getQuestions,\n      getQuestionById: getQuestionById,\n      addQuestion: addQuestion,\n      removeQuestion: removeQuestion,\n      voteOption: voteOption\n    };\n\n    init();\n\n    return service;\n\n    function init(){\n      questions = $firebaseArray(FirebaseDataService.questions);\n    }\n\n    function Question(){\n      this.title = '';\n      this.description = '';\n      this.imageUrl = '';\n      this.createdAt = null;\n    }\n\n    function Vote(){\n      this.voter = '';\n      this.createdAt = null;\n    }\n\n    function getQuestions(){\n      return questions;\n    }\n\n    function getQuestionById(id){\n      return $firebaseObject(FirebaseDataService.questions.child(id));\n    }\n\n    function addQuestion(question){\n      question.createdAt = (new Date()).getTime();\n      return questions.$add(question);\n    }\n\n    function removeQuestion(question){\n       return questions.$remove(question);\n    }\n\n    function voteOption(option){\n      var vote = new Vote();\n      vote.createdAt = (new Date()).getTime();\n      if(!angular.isDefined(option.votes)){\n        option.votes = [];\n      }\n      option.votes.push(vote);\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angularVoteApp')\n    .filter('readabledate', dateFilter);\n\n  /** @ngInject */\n  function dateFilter() {\n    return function (time) {\n      return moment(time).fromNow();\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angularVoteApp')\n    .factory('OptionService', OptionService);\n\n  /** @ngInject */\n  function OptionService($firebaseArray, FirebaseDataService) {\n    var options = null;\n\n    var service = {\n      Option: Option,\n      addOptionsToQuestion: addOptionsToQuestion,\n      getOptionsToQuestion: getOptionsToQuestion\n    };\n\n    init();\n\n    return service;\n\n    function Option(){\n      this.label = '';\n    }\n\n    function init(){\n      options = $firebaseArray(FirebaseDataService.options);\n    }\n\n    function addOptionsToQuestion(questionId, options){\n      _.forEach(options, function (option) {\n        FirebaseDataService.options.child(questionId).push(option);\n      });\n    }\n\n    function getOptionsToQuestion(question){\n      return $firebaseArray(FirebaseDataService.options.child(question.$id));\n    }\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angularVoteApp')\n    .factory('NotificationService', NotificationService);\n\n  /** @ngInject */\n  function NotificationService($mdToast) {\n\n    var service = {\n      showNotification: showNotification\n    };\n\n    return service;\n\n    function showNotification(message){\n      $mdToast.show(\n        $mdToast.simple()\n          .textContent(message)\n          .position(\"bottom right\")\n          .hideDelay(1500)\n      );\n    }\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angularVoteApp')\n    .factory('FirebaseDataService', FirebaseDataService);\n\n  /** @ngInject */\n  function FirebaseDataService(firebaseRef) {\n    var root = new Firebase(firebaseRef);\n\n    var service = {\n      root: root,\n      questions: root.child(\"questions\"),\n      votes: root.child(\"votes\"),\n      options: root.child(\"options\"),\n      reset: reset\n    };\n\n    return service;\n\n    function reset(){\n      root.remove();\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angularVoteApp')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock($log) {\n    $log.debug('runBlock end');\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angularVoteApp')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider) {\n    $stateProvider\n      .state('home', {\n        url: '/',\n        templateUrl: 'app/components/question/questions.html',\n        controller: 'QuestionsController',\n        controllerAs: 'vm'\n      });\n\n    $stateProvider\n      .state('statistics', {\n        url: '/statistics/:id',\n        templateUrl: 'app/components/statistics/statistics.html',\n        controller: 'StatisticsController',\n        controllerAs: 'vm'\n\n      });\n\n    $urlRouterProvider.otherwise('/');\n  }\n\n})();\n\n/* global malarkey:false, moment:false */\n(function() {\n  'use strict';\n\n  angular\n    .module('angularVoteApp')\n    .constant('moment', moment)\n    .constant('firebaseRef', 'https://angularvoteapp.firebaseio.com');\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('angularVoteApp')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider, toastrConfig) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n\n    // Set options third-party lib\n    toastrConfig.allowHtml = true;\n    toastrConfig.timeOut = 3000;\n    toastrConfig.positionClass = 'toast-top-right';\n    toastrConfig.preventDuplicates = true;\n    toastrConfig.progressBar = true;\n  }\n\n})();\n\nangular.module(\"angularVoteApp\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/components/question/questions.html\",\"<md-content layout-xs=\\\"column\\\" layout-gt-xs=\\\"row\\\" layout-wrap=\\\"\\\"><question-list-item question=\\\"question\\\" flex-xs=\\\"\\\" flex-gt-xs=\\\"50\\\" ng-repeat=\\\"question in vm.questions | orderBy: \\'-createdAt\\'\\\"></question-list-item></md-content>\");\n$templateCache.put(\"app/components/side-nav/sidenav.html\",\"<md-toolbar class=\\\"md-theme-light\\\"><h1 class=\\\"md-toolbar-tools\\\">Menu</h1></md-toolbar><md-content layout-padding=\\\"\\\" layout=\\\"column\\\"><md-button ui-sref=\\\"home\\\" class=\\\"md-primary\\\"><md-icon md-font-library=\\\"material-icons\\\">home</md-icon>Home</md-button><md-button ng-click=\\\"vm.openNewQuestionDialog()\\\" class=\\\"md-primary\\\"><md-icon md-font-library=\\\"material-icons\\\">add</md-icon>New question</md-button><md-button ng-click=\\\"vm.showConfirm()\\\" class=\\\"md-warn\\\"><md-icon md-font-library=\\\"material-icons\\\">delete</md-icon>Reset DB</md-button><md-button ng-click=\\\"vm.close()\\\"><md-icon md-font-library=\\\"material-icons\\\">close</md-icon>Close menu</md-button></md-content>\");\n$templateCache.put(\"app/components/side-nav/sidenav.toggle.html\",\"<div><md-button id=\\\"sidenav-opener\\\" class=\\\"md-icon-button\\\" aria-label=\\\"Favorite\\\" ng-click=\\\"vm.toggleRight()\\\"><md-icon md-font-library=\\\"material-icons\\\">menu</md-icon></md-button></div>\");\n$templateCache.put(\"app/components/statistics/statistics.html\",\"<md-content class=\\\"md-padding\\\" layout=\\\"column\\\" ng-if=\\\"vm.question\\\" id=\\\"statistics\\\"><h2>{{ vm.question.title }}</h2><h3>{{ vm.votes.length }} votes</h3><div layout-xs=\\\"column\\\" layout-gt-xs=\\\"row\\\"><div flex-xs=\\\"\\\" flex-gt-xs=\\\"50\\\" layout=\\\"column\\\"><md-card><md-card-content><div id=\\\"container\\\" highcharts-pie=\\\"\\\" chart-data=\\\"vm.votesMap\\\" ng-if=\\\"vm.votesMap\\\"></div></md-card-content></md-card></div><div flex-xs=\\\"\\\" flex-gt-xs=\\\"50\\\" layout=\\\"column\\\"><md-card><md-card-content><div id=\\\"container-column\\\" highcharts-column=\\\"\\\" chart-data=\\\"vm.votesMap\\\" ng-if=\\\"vm.votesMap\\\"></div></md-card-content></md-card></div></div></md-content>\");\n$templateCache.put(\"app/components/question/list/question.list.item.directive.html\",\"<md-card><md-card-title><md-card-title-text><a ui-sref=\\\"statistics({id: vm.question.$id})\\\"><span class=\\\"md-headline\\\">{{ vm.question.title }}</span></a> <span class=\\\"md-subhead\\\">Created {{ vm.question.createdAt | readabledate }}</span></md-card-title-text><md-card-title-media ng-if=\\\"vm.question.imageUrl\\\"><img class=\\\"md-media-lg card-media\\\" src=\\\"{{ vm.question.imageUrl}}\\\"></md-card-title-media></md-card-title><md-card-actions layout=\\\"row\\\" layout-align=\\\"end center\\\"><md-button class=\\\"md-primary\\\" ng-click=\\\"vm.vote()\\\" ng-if=\\\"vm.selected!=null\\\"><md-icon md-font-library=\\\"material-icons\\\">check</md-icon>Save vote</md-button><md-button class=\\\"md-warn\\\" ng-click=\\\"vm.showConfirm()\\\"><md-icon md-font-library=\\\"material-icons\\\">delete</md-icon>Delete</md-button><md-button ui-sref=\\\"statistics({id: vm.question.$id})\\\"><md-icon md-font-library=\\\"material-icons\\\">insert_chart</md-icon>Statistics</md-button></md-card-actions><md-card-content><md-radio-group ng-model=\\\"vm.selected\\\" class=\\\"md-primary\\\"><md-radio-button ng-repeat=\\\"option in vm.options\\\" ng-value=\\\"option.label\\\">{{ option.label }}<br></md-radio-button></md-radio-group></md-card-content></md-card>\");\n$templateCache.put(\"app/components/question/new/new.question.dialog.html\",\"<md-dialog aria-label=\\\"Create new question\\\" ng-cloak=\\\"\\\" style=\\\"min-width: 50%;\\\"><form name=\\\"NewQuestionForm\\\"><md-toolbar><div class=\\\"md-toolbar-tools\\\"><h2>New question</h2><span flex=\\\"\\\"></span><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.cancel()\\\"><md-icon md-font-library=\\\"material-icons\\\" aria-label=\\\"Close dialog\\\">close</md-icon></md-button></div></md-toolbar><md-dialog-content><div class=\\\"md-dialog-content\\\"><div><md-input-container class=\\\"md-block\\\" flex-gt-sm=\\\"\\\"><label>Title</label> <input ng-model=\\\"vm.question.title\\\" required=\\\"\\\"></md-input-container><md-input-container class=\\\"md-block\\\"><label>Description</label> <textarea ng-model=\\\"vm.question.description\\\" md-maxlength=\\\"150\\\" rows=\\\"5\\\" md-select-on-focus=\\\"\\\"></textarea></md-input-container><md-input-container class=\\\"md-block\\\" flex-gt-sm=\\\"\\\"><label>Image url</label> <input ng-model=\\\"vm.question.imageUrl\\\"></md-input-container></div><div><label>Options</label><div layout=\\\"row\\\" layout-wrap=\\\"\\\"><md-input-container class=\\\"md-block\\\" flex=\\\"50\\\" ng-repeat=\\\"option in vm.options track by $index\\\"><label>Option #{{ $index }}</label> <textarea ng-model=\\\"option.label\\\" columns=\\\"1\\\" md-maxlength=\\\"50\\\" rows=\\\"1\\\" aria-multiline=\\\"true\\\" aria-required=\\\"true\\\" aria-invalid=\\\"true\\\" ng-trim=\\\"false\\\"></textarea></md-input-container></div></div></div></md-dialog-content><md-dialog-actions layout=\\\"row\\\"><md-button ng-click=\\\"vm.addNewOption()\\\">Add new option</md-button><md-button class=\\\"md-primary\\\" ng-click=\\\"vm.create()\\\" ng-disabled=\\\"NewQuestionForm.$invalid\\\">Create Question</md-button></md-dialog-actions></form></md-dialog>\");}]);"],"sourceRoot":"/source/"}